"use strict";(self.webpackChunktechdocs=self.webpackChunktechdocs||[]).push([[3171],{5722:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>d});var l=i(4848),r=i(8453);const t={title:"Text processing"},s=void 0,c={id:"textprocessing",title:"Text processing",description:"Convert file encoding",source:"@site/docs/textprocessing.md",sourceDirName:".",slug:"/textprocessing",permalink:"/techdocs/docs/textprocessing",draft:!1,unlisted:!1,editUrl:"https://github.com/lfir/techdocs/edit/devel/docs/textprocessing.md",tags:[],version:"current",lastUpdatedBy:"Leandro",lastUpdatedAt:1727442809,formattedLastUpdatedAt:"Sep 27, 2024",frontMatter:{title:"Text processing"},sidebar:"defaultSidebar",previous:{title:"SSH",permalink:"/techdocs/docs/ssh"},next:{title:"Tmux",permalink:"/techdocs/docs/tmux"}},o={},d=[{value:"Convert file encoding",id:"convert-file-encoding",level:2},{value:"Get number of lines in targetFile",id:"get-number-of-lines-in-targetfile",level:2},{value:"Read csv file and extract certain columns in certain order",id:"read-csv-file-and-extract-certain-columns-in-certain-order",level:2},{value:"Remove duplicate lines",id:"remove-duplicate-lines",level:2},{value:"Preserving line order in output",id:"preserving-line-order-in-output",level:3},{value:"Not maintaining line order",id:"not-maintaining-line-order",level:3},{value:"Sed",id:"sed",level:2},{value:"Delete lines matching regex &amp; print result",id:"delete-lines-matching-regex--print-result",level:3},{value:"Replace all occurrences of regex in target file with string",id:"replace-all-occurrences-of-regex-in-target-file-with-string",level:3},{value:"Replace only on lines matching the line pattern",id:"replace-only-on-lines-matching-the-line-pattern",level:3},{value:"Useful options",id:"useful-options",level:3},{value:"Sort by first column alphabetically, second numerically",id:"sort-by-first-column-alphabetically-second-numerically",level:2}];function a(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"convert-file-encoding",children:"Convert file encoding"}),"\n",(0,l.jsx)(n.p,{children:"Get available encodings."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"iconv -l\n"})}),"\n",(0,l.jsx)(n.p,{children:"Convert text from the ISO 8859-15 character encoding to UTF-8."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"iconv -f ISO-8859-15 -t UTF-8 < input.txt > output.txt\n"})}),"\n",(0,l.jsx)(n.h2,{id:"get-number-of-lines-in-targetfile",children:"Get number of lines in targetFile"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"wc -l targetFile | grep -Eo '[0-9]+'\n"})}),"\n",(0,l.jsx)(n.h2,{id:"read-csv-file-and-extract-certain-columns-in-certain-order",children:"Read csv file and extract certain columns in certain order"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"awk -F ',' '{print $3 \",\" $1}' a1.csv > b2.csv\n"})}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Saves output to file ",(0,l.jsx)(n.code,{children:"b2.csv"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Columns are referenced using ",(0,l.jsx)(n.code,{children:"$1"}),", ",(0,l.jsx)(n.code,{children:"$2"}),", ",(0,l.jsx)(n.code,{children:"$x"}),"."]}),"\n",(0,l.jsx)(n.li,{children:"Default fieldsep if not set is space."}),"\n"]})}),"\n",(0,l.jsx)(n.h2,{id:"remove-duplicate-lines",children:"Remove duplicate lines"}),"\n",(0,l.jsx)(n.h3,{id:"preserving-line-order-in-output",children:"Preserving line order in output"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"awk '!seen[$0]++' target.csv\n"})}),"\n",(0,l.jsx)(n.h3,{id:"not-maintaining-line-order",children:"Not maintaining line order"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"sort -u target.csv\n"})}),"\n",(0,l.jsx)(n.admonition,{type:"tip",children:(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"-f"})," - Case insensitive comparisons."]})}),"\n",(0,l.jsx)(n.h2,{id:"sed",children:"Sed"}),"\n",(0,l.jsx)(n.h3,{id:"delete-lines-matching-regex--print-result",children:"Delete lines matching regex & print result"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"sed '/regex/d' file\n"})}),"\n",(0,l.jsx)(n.h3,{id:"replace-all-occurrences-of-regex-in-target-file-with-string",children:"Replace all occurrences of regex in target file with string"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"sed 's/regex/string/g' file\n"})}),"\n",(0,l.jsx)(n.h3,{id:"replace-only-on-lines-matching-the-line-pattern",children:"Replace only on lines matching the line pattern"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"sed '/lineregex/s/regex/string/g' file\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Remove ",(0,l.jsx)(n.code,{children:"g"})," from any of the expressions above to replace only the first occurrence on each line."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"useful-options",children:"Useful options"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"-i"})," - Make changes overwriting the file."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"--in-place=.bkp"})," - Also update in-place but create a backup of the original file with .bkp extension."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"-e"})," - Apply multiple expressions (i.e. ",(0,l.jsx)(n.code,{children:"sed -e 's/regex0/string0/' -e 's/regex1/string1/' file"}),")."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"-r"})," - Allow extended regular expressions."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"sort-by-first-column-alphabetically-second-numerically",children:"Sort by first column alphabetically, second numerically"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"sort -k1,1 -k2,2nr\n"})}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Last ",(0,l.jsx)(n.code,{children:"r"})," causes reversed output."]}),"\n",(0,l.jsx)(n.li,{children:"Default fieldsep is space."}),"\n"]})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>c});var l=i(6540);const r={},t=l.createContext(r);function s(e){const n=l.useContext(t);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),l.createElement(t.Provider,{value:n},e.children)}}}]);