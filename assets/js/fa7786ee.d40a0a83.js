"use strict";(self.webpackChunktechdocs=self.webpackChunktechdocs||[]).push([[7694],{1750:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>c,metadata:()=>a,toc:()=>r});const a=JSON.parse('{"id":"bacula","title":"Bacula","description":"Compile & install 7.4.4 on SLES 12","source":"@site/docs/bacula.md","sourceDirName":".","slug":"/bacula","permalink":"/techdocs/docs/bacula","draft":false,"unlisted":false,"editUrl":"https://github.com/lfir/techdocs/edit/devel/docs/bacula.md","tags":[],"version":"current","lastUpdatedBy":"Asta86","lastUpdatedAt":1736605018000,"frontMatter":{"title":"Bacula"},"sidebar":"defaultSidebar","previous":{"title":"Apache & Tomcat","permalink":"/techdocs/docs/apache"},"next":{"title":"Bash","permalink":"/techdocs/docs/bash"}}');var s=l(4848),t=l(8453);const c={title:"Bacula"},i=void 0,d={},r=[{value:"Compile &amp; install 7.4.4 on SLES 12",id:"compile--install-744-on-sles-12",level:2},{value:"Manage tape device manually",id:"manage-tape-device-manually",level:2},{value:"Check device status",id:"check-device-status",level:3},{value:"Load tape in slot x",id:"load-tape-in-slot-x",level:3},{value:"Rewind tape",id:"rewind-tape",level:3},{value:"Write EOF",id:"write-eof",level:3},{value:"Replace tapes",id:"replace-tapes",level:2},{value:"Test config syntax",id:"test-config-syntax",level:2},{value:"Update volume options",id:"update-volume-options",level:2}];function o(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"compile--install-744-on-sles-12",children:"Compile & install 7.4.4 on SLES 12"}),"\n",(0,s.jsx)(n.p,{children:"Enable sdk repositories."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"zypper addrepo url name\n"})}),"\n",(0,s.jsx)(n.p,{children:"Install dependencies."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"zypper install mysql ncurses-devel libqt4-devel \\\nlibacl-devel gcc gcc-c++ libmysqlclient-devel\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Client (",(0,s.jsx)(n.strong,{children:"bacula-fd"}),") installation."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'CFLAGS="-g -Wall" ./configure \\\n--sbindir=/opt/bacula/bin \\\n--sysconfdir=/opt/bacula/etc \\\n--with-working-dir=/opt/bacula/working \\\n--with-pid-dir=/opt/bacula/working \\\n--with-subsys-dir=/opt/bacula/working \\\n--enable-client-only\n\nmake install\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Server (",(0,s.jsx)(n.strong,{children:"bacula-sd"}),", ",(0,s.jsx)(n.strong,{children:"bacula-dir"}),") installation."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'CFLAGS="-g -Wall" ./configure \\\n--sbindir=/opt/bacula/bin \\\n--sysconfdir=/opt/bacula/etc \\\n--with-working-dir=/opt/bacula/working \\\n--with-pid-dir=/opt/bacula/working \\\n--with-subsys-dir=/opt/bacula/working \\\n--enable-conio \\\n--enable-smartalloc \\\n--enable-bat \\\n--with-mysql\n\nmake install\nmake install-autostart # Enable daemons autostart\n'})}),"\n",(0,s.jsx)(n.p,{children:"Start db server."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"service mysql start\n"})}),"\n",(0,s.jsx)(n.p,{children:"Create admin db user."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"mysql -u root\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Create user ",(0,s.jsx)(n.strong,{children:"bacula"}),". Run db scripts (in ",(0,s.jsx)(n.code,{children:"/opt/bacula/etc"}),")."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"./create_mysql_database\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"./make_mysql_tables\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"./grant_mysql_privileges\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Start bacula daemons (in ",(0,s.jsx)(n.code,{children:"/opt/bacula/bin"}),")."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"./bacula start\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"http://www.bacula.org/7.4.x-manuals/en/main/Installing_Bacula.html",children:"Reference"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"manage-tape-device-manually",children:"Manage tape device manually"}),"\n",(0,s.jsx)(n.h3,{id:"check-device-status",children:"Check device status"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"mtx -f /dev/xxyy status\n"})}),"\n",(0,s.jsx)(n.h3,{id:"load-tape-in-slot-x",children:"Load tape in slot x"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"mtx -f /dev/xxyy load x\n"})}),"\n",(0,s.jsx)(n.h3,{id:"rewind-tape",children:"Rewind tape"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"mt -f /dev/xxyy rewind\n"})}),"\n",(0,s.jsx)(n.h3,{id:"write-eof",children:"Write EOF"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"mt -f /dev/xxyy weof\n"})}),"\n",(0,s.jsx)(n.h2,{id:"replace-tapes",children:"Replace tapes"}),"\n",(0,s.jsxs)(n.p,{children:["In ",(0,s.jsx)(n.strong,{children:"bconsole"})," run ",(0,s.jsx)(n.code,{children:"unmount"})," and then after replacing tapes:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"update slots scan\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"label barcodes storage=nomTapeStorage\n"})}),"\n",(0,s.jsx)(n.p,{children:"Choose tape storage/pool when requested."}),"\n",(0,s.jsx)(n.h2,{id:"test-config-syntax",children:"Test config syntax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"bacula-dir -tc /etc/bacula/bacula-dir.conf\n"})}),"\n",(0,s.jsx)(n.h2,{id:"update-volume-options",children:"Update volume options"}),"\n",(0,s.jsxs)(n.p,{children:["In ",(0,s.jsx)(n.strong,{children:"bconsole"})," execute ",(0,s.jsx)(n.code,{children:"update"}),' and\nthen select "Volume Parameters" -> "All Volumes from Pool" and\nselect the pool.']})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>c,x:()=>i});var a=l(6540);const s={},t=a.createContext(s);function c(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);