"use strict";(self.webpackChunktechdocs=self.webpackChunktechdocs||[]).push([[9313],{8911:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"java","title":"Java","description":"Common directory for JDKs installed with DNF","source":"@site/docs/java.md","sourceDirName":".","slug":"/java","permalink":"/techdocs/docs/java","draft":false,"unlisted":false,"editUrl":"https://github.com/lfir/techdocs/edit/devel/docs/java.md","tags":[],"version":"current","lastUpdatedBy":"Leandro","lastUpdatedAt":1765761072000,"frontMatter":{"title":"Java"},"sidebar":"defaultSidebar","previous":{"title":"Grub 2","permalink":"/techdocs/docs/grub"},"next":{"title":"KVM","permalink":"/techdocs/docs/kvm"}}');var t=s(4848),r=s(8453);const a={title:"Java"},d=void 0,l={},o=[{value:"Common directory for JDKs installed with DNF",id:"common-directory-for-jdks-installed-with-dnf",level:2},{value:"Common Maven terminal commands",id:"common-maven-terminal-commands",level:2},{value:"Clean <em>target</em> dir and build project",id:"clean-target-dir-and-build-project",level:3},{value:"Generate artifacts",id:"generate-artifacts",level:3},{value:"Run the test cases",id:"run-the-test-cases",level:3},{value:"Show dependency tree",id:"show-dependency-tree",level:3},{value:"Download sources",id:"download-sources",level:3},{value:"List available updates",id:"list-available-updates",level:3},{value:"Ivy",id:"ivy",level:2},{value:"Duplicate dependencies",id:"duplicate-dependencies",level:3},{value:"Mockito",id:"mockito",level:2},{value:"Run program in the terminal without manually compiling it first",id:"run-program-in-the-terminal-without-manually-compiling-it-first",level:2},{value:".java source code files",id:"java-source-code-files",level:3},{value:"Shebang files",id:"shebang-files",level:3},{value:"Spring",id:"spring",level:2},{value:"Common static imports used in tests",id:"common-static-imports-used-in-tests",level:3},{value:"Default variable values can also be set in .properties files",id:"default-variable-values-can-also-be-set-in-properties-files",level:3},{value:"Useful cron expressions that can be used with @Scheduled",id:"useful-cron-expressions-that-can-be-used-with-scheduled",level:3},{value:"String",id:"string",level:2},{value:"Comparisons (equals vs. ==)",id:"comparisons-equals-vs-",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"common-directory-for-jdks-installed-with-dnf",children:"Common directory for JDKs installed with DNF"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"/usr/lib/jvm\n"})}),"\n",(0,t.jsx)(n.h2,{id:"common-maven-terminal-commands",children:"Common Maven terminal commands"}),"\n",(0,t.jsxs)(n.h3,{id:"clean-target-dir-and-build-project",children:["Clean ",(0,t.jsx)(n.em,{children:"target"})," dir and build project"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"./mvnw clean install\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["Option ",(0,t.jsx)(n.code,{children:"-DskipTests"})," can be used to ignore the tests"]})}),"\n",(0,t.jsx)(n.h3,{id:"generate-artifacts",children:"Generate artifacts"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"./mvnw package\n"})}),"\n",(0,t.jsx)(n.h3,{id:"run-the-test-cases",children:"Run the test cases"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"./mvnw test\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["To run only specific tests use option ",(0,t.jsx)(n.code,{children:"-Dtest=TestClassName"})]})}),"\n",(0,t.jsx)(n.h3,{id:"show-dependency-tree",children:"Show dependency tree"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"./mvnw dependency:tree\n"})}),"\n",(0,t.jsx)(n.h3,{id:"download-sources",children:"Download sources"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"./mvnw dependency:sources\n"})}),"\n",(0,t.jsx)(n.h3,{id:"list-available-updates",children:"List available updates"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"./mvnw versions:display-dependency-updates\n"})}),"\n",(0,t.jsxs)(n.admonition,{type:"warning",children:[(0,t.jsx)(n.p,{children:"If more than one version of Java is installed on the host a suitable one might need to be specified instead of the default before running the commands above, i.e."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"export JAVA_HOME=/usr/lib/jvm/java-21-openjdk\n./mvnw...\n"})})]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["If Maven is installed system-wide the ",(0,t.jsx)(n.a,{href:"https://manpages.ubuntu.com/manpages/noble/mvn.1.html",children:(0,t.jsx)(n.code,{children:"mvn"})})," command can be used instead of the Maven Wrapper (",(0,t.jsx)(n.code,{children:"mvnw"}),")"]})}),"\n",(0,t.jsx)(n.h2,{id:"ivy",children:"Ivy"}),"\n",(0,t.jsx)(n.h3,{id:"duplicate-dependencies",children:"Duplicate dependencies"}),"\n",(0,t.jsxs)(n.p,{children:["When a jar file is added to the classpath more than once (i.e. because it is a sub-dependency of multiple libraries that use different versions of it) the ",(0,t.jsx)(n.strong,{children:"first"})," one declared in ",(0,t.jsx)(n.strong,{children:"ivy.xml"})," takes precedence."]}),"\n",(0,t.jsx)(n.h2,{id:"mockito",children:"Mockito"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Full mocks (created with ",(0,t.jsx)(n.code,{children:"Mockito.mock()"}),") don't execute target code during stubbing, so matchers never become actual arguments. Spies (",(0,t.jsx)(n.code,{children:"Mockito.spy()"}),") do execute real code, so matchers must be handled with ",(0,t.jsx)(n.code,{children:"doXxx().when()"})," syntax instead of ",(0,t.jsx)(n.code,{children:"when().thenSomething()"})," directly."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["When using ",(0,t.jsx)(n.code,{children:"@InjectMocks"})," objects mocked with ",(0,t.jsx)(n.code,{children:"@Mock"})," need to have EXACTLY the same type in both the original and tests classes (not a subclass/superclass)."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"run-program-in-the-terminal-without-manually-compiling-it-first",children:"Run program in the terminal without manually compiling it first"}),"\n",(0,t.jsx)(n.h3,{id:"java-source-code-files",children:".java source code files"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"java src/FileCounter.java\n"})}),"\n",(0,t.jsx)(n.h3,{id:"shebang-files",children:"Shebang files"}),"\n",(0,t.jsx)(n.p,{children:"Start the file of the Java program with"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"#!/usr/lib/jvm/java-18/bin/java --source 11\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Then give it execution permission and run it with ",(0,t.jsx)(n.code,{children:"./script"})," (the .java extension is unnecessary).\nThe ",(0,t.jsx)(n.code,{children:"--source"})," option can be used to specify a different version of Java used by the program,\nalthough the target JRE needs to support it."]}),"\n",(0,t.jsxs)(n.p,{children:["File counter ",(0,t.jsx)(n.a,{href:"https://github.com/lfir/ex-java-terminal-script",children:"example"}),"."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Target file should have a ",(0,t.jsx)(n.code,{children:"main"})," method"]}),"\n",(0,t.jsx)(n.li,{children:"Java 11+ required"}),"\n"]})}),"\n",(0,t.jsx)(n.h2,{id:"spring",children:"Spring"}),"\n",(0,t.jsx)(n.h3,{id:"common-static-imports-used-in-tests",children:"Common static imports used in tests"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"import static org.assertj.core.api.Assertions.*;\nimport static org.hamcrest.Matchers.*;\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.ArgumentMatchers.*;\nimport static org.mockito.BDDMockito.*;\nimport static org.mockito.Mockito.*;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"default-variable-values-can-also-be-set-in-properties-files",children:"Default variable values can also be set in .properties files"}),"\n",(0,t.jsx)(n.p,{children:"For example to default to the blank String when the environment variable is missing:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"some.property=${SOME_VARIABLE:}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"useful-cron-expressions-that-can-be-used-with-scheduled",children:"Useful cron expressions that can be used with @Scheduled"}),"\n",(0,t.jsx)(n.p,{children:"Every second"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"* * * * * *\n"})}),"\n",(0,t.jsx)(n.p,{children:"Every minute"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"0 0/1 * 1/1 * ?\n"})}),"\n",(0,t.jsx)(n.h2,{id:"string",children:"String"}),"\n",(0,t.jsx)(n.h3,{id:"comparisons-equals-vs-",children:"Comparisons (equals vs. ==)"}),"\n",(0,t.jsxs)(n.p,{children:["Generally ",(0,t.jsx)(n.code,{children:".equals()"})," needs to be used, so the contents are compared.\nIf the argument is ",(0,t.jsx)(n.code,{children:"null"})," it returns ",(0,t.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["With ",(0,t.jsx)(n.code,{children:"=="})," whether both operands refer to the same object is checked."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>d});var i=s(6540);const t={},r=i.createContext(t);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);